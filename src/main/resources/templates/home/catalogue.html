<style>
  /* Carousel base class */
  .carousel {
    margin-bottom: 4rem;
  }
  /* Since positioning the image, we need to help out the caption */
  .carousel-caption {
    bottom: 3rem;
    z-index: 10;
  }
  
  /* Declare heights because of positioning of img element */
  .carousel-item {
    height: 26rem;
  }
  
  /* MARKETING CONTENT
  -------------------------------------------------- */
  
  /* Center align the text within the three columns below the carousel */
  .marketing .col-lg-4 {
    margin-bottom: 1.5rem;
    text-align: center;
  }
  /* rtl:begin:ignore */
  .marketing .col-lg-4 p {
    margin-right: .75rem;
    margin-left: .75rem;
  }
  /* rtl:end:ignore */
  
  /* Featurettes
  ------------------------- */
  
  .featurette-divider {
    margin: 5rem 0; /* Space out the Bootstrap <hr> more */
  }
  
  /* Thin out the marketing headings */
  /* rtl:begin:remove */
  .featurette-heading {
    letter-spacing: -.05rem;
  }

  .card {
  box-sizing: border-box;
  background: rgba(217, 217, 217, 0.58);
  border: 1px solid white;
  box-shadow: 12px 17px 51px rgba(0, 0, 0, 0.22);
  backdrop-filter: blur(6px);
  border-radius: 17px;
  text-align: center;
  cursor: pointer;
  transition: all 0.5s;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
  font-weight: bolder;
  color: black;
}

.card:hover {
  border: 1px solid black;
  transform: scale(1.05);
}

.card:active {
  transform: scale(0.95) rotateZ(1.7deg);
}
  
  /* rtl:end:remove */
  
  /* RESPONSIVE CSS
  -------------------------------------------------- */
  
  @media (min-width: 40em) {
    /* Bump up size of carousel content */
    .carousel-caption p {
      margin-bottom: 1.25rem;
      font-size: 1.25rem;
      line-height: 1.4;
    }
  
    .featurette-heading {
      font-size: 50px;
    }
  }
  
  @media (min-width: 62em) {
    .featurette-heading {
      margin-top: 7rem;
    }
  }
  
</style>

<div class="b-example-divider"></div>
<main>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="carousel-container mb-6">
          <!-- Carousel -->
          <div id="myCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
              <!-- Carousel items -->
              <div class="carousel-item active">
                <img src="/img/dragonToro2.jpg" class="d-block w-60" alt="Description of second image">
                <!--<svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false"><rect width="100%" height="100%" fill="var(--bs-secondary-color)"/></svg>-->
                <div class="container">
                  <div class="carousel-caption text-start">
                    <h1>Example headline.</h1>
                    <p class="opacity-75">Some representative placeholder content for the first slide of the carousel.</p>
                    <p><a class="btn btn-lg btn-primary" href="#">Sign up today</a></p>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <img src="/img/Adidas1.png" class="d-block w-100" alt="Description of second image">
                <div class="container">
                    <div class="carousel-caption">
                        <h1>Another example headline.</h1>
                        <p>Some representative placeholder content for the second slide of the carousel.</p>
                        <p><a class="btn btn-lg btn-primary" href="#">Learn more</a></p>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img src="/img/AirMax1Anuncio.png" class="d-block w-100" alt="Description of third image">
                <div class="container">
                    <div class="carousel-caption">
                        <h1>Another example headline.</h1>
                        <p>Some representative placeholder content for the second slide of the carousel.</p>
                        <p><a class="btn btn-lg btn-primary" href="#">Learn more</a></p>
                    </div>
                </div>
            </div>
              <!-- Add more carousel items as needed -->
            </div>
            <!-- Carousel navigation buttons -->
            <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div><!-- /.col-lg-12 -->
    </div><!-- /.row -->

    <!-- Marketing messaging and featurettes -->
    <div class="row">
      <div class="col-lg-12">
        <div class="container marketing">
          <div class="row">
            <!-- Iterar sobre las zapatillas y mostrar cada una -->
            <div th:each="zapatilla : ${zapatillas}" class="col-lg-4">
              <div class="card mb-4">
                <img class="card-img-top" th:src="@{'/img/' + ${zapatilla.imagen} + '.png'}" alt="Card image cap">
                <div class="card-body">
                  <h5 class="card-title" th:text="${zapatilla.nombre}">Nombre de la zapatilla</h5>
                  <p class="card-text" th:text="'Marca: ' + ${zapatilla.marcas?.nombre} + ', Modelo: ' + ${zapatilla.modelo?.nombre} + ', Precio: ' + ${zapatilla.precio} + '€, Color: ' + ${zapatilla.color} + ', Talla: ' + ${zapatilla.talla} + ', Stock: ' + ${zapatilla.stock}"></p>
                  <a th:href="@{/mostrarProducto(id=${zapatilla.id})}" class="btn btn-primary">Ver Producto</a>
                  <a class="btn btn-outline-success me-2" th:onclick="addZapatilla([[(${zapatilla})]])">Añadir
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                      <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                    </svg>  
                  </a>
                </div>
              </div>
            </div>
            <!-- Add more marketing content as needed -->
          </div><!-- /.row -->
        </div><!-- /.container marketing -->
      </div><!-- /.col-lg-12 -->
    </div><!-- /.row -->
  </div><!-- /.container -->
</main>
<script>

  const BASE_URL = window.location.origin;
  const API_URL = `${BASE_URL}/api/carritos`;

  function addZapatilla(zapatilla) {
      if (!zapatilla) {
          return;
      }
      const xhttp = new XMLHttpRequest();
      xhttp.open('POST', `${API_URL}/update`, true)
      xhttp.setRequestHeader('Content-type', 'application/json; charset=UTF-8')
      xhttp.send(JSON.stringify(zapatilla));

      xhttp.onload = function () {

          if ([200, 201].includes(xhttp.status)) {
              alert("Guardado correctamente");
              window.location.href = `${BASE_URL}/catalogue`;
          } else {
              alert("Error al proseguir con la compra");
          }
      }
  }
</script>
